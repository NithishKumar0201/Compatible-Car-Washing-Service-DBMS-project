SET SERVEROUTPUT ON SIZE 1000000; 
CREATE or REPLACE PROCEDURE CHANGE_NO(C_ID NUMBER, PH_NO IN OUT NUMBER)
IS
	v_ID NUMBER(4);
	VH_NO NUMBER(10);
	cursor CUR is 
	select CUSTOMER_ID,CONTACT_NO from CUSTOMER where CUSTOMER_ID=C_ID;
	id number;

BEGIN
	open CUR;
	loop
	fetch CUR into V_ID,VH_NO;
	EXIT WHEN CUR%NOTFOUND;
	end loop;
	close CUR;
	begin
	UPDATE CUSTOMER SET CONTACT_NO=PH_NO WHERE CUSTOMER_ID=C_ID;
	end;	
	
	END;
/



DECLARE 
	PHONE CUSTOMER.CONTACT_NO%type; 
	no number;
BEGIN 
	NO :=&NO;
	PHONE :=&PHONE;
	CHANGE_NO(NO,PHONE);
	dbms_output.put_line('YOUR NEW CONTACT NUMBER:'||PHONE||'IS UPDATED');
END;
/


------------------------------------
SET SERVEROUTPUT ON SIZE 1000000; 
CREATE OR REPLACE PROCEDURE CHANGE_PAYMENT(P_ID IN NUMBER,MODI IN PAYMENT.MODE_OF_PAYMENT%TYPE)
IS
CURSOR CUR IS
SELECT MODE_OF_PAYMENT FROM PAYMENT WHERE PAY_ID=P_ID;
OLD VARCHAR(20);
BEGIN
	open CUR;
	loop
	fetch CUR into OLD;
	EXIT WHEN CUR%NOTFOUND;
	end loop;
	close CUR;
	UPDATE PAYMENT  SET MODE_OF_PAYMENT=MODI WHERE PAY_ID=P_ID;	
	dbms_output.put_line('WELCOME! DUE TO NOVEL CORONA DISEASE ATTACK, ALL THE TRANSCATIONS ARE TEMPORAILY STOPPED.');
	dbms_output.put_line('YOUR OPTION IS NOT CHANGED.SORRY FOR INCONVENIENCE!');
	UPDATE PAYMENT  SET MODE_OF_PAYMENT=OLD WHERE PAY_ID=P_ID;
END;
/

BEGIN 
	
	CHANGE_PAYMENT(801,'CASHLLL');
	--dbms_output.put_line('YOUR NEW PAY MODE'||PHONE||'IS UPDATED');
END;
/
---------------------------